# 🎮 센서 기반 게임 플랫폼 v4.0 🆕

모바일 센서(자이로스코프, 가속도계, 방향 센서)를 활용한 실시간 게임 플랫폼입니다. WebSocket을 통해 휴대폰 센서 데이터를 수집하고, **10개의 다양한 장르 게임**에서 활용할 수 있습니다.

## 🚀 v4.0 주요 업데이트 (2024.07)

### 🏗️ 아키텍처 혁신
- **📁 공통 모듈 시스템**: 중복 코드 90% 제거
- **🎯 상속 기반 구조**: BaseSensorManager 클래스 도입
- **⚙️ 설정 중앙화**: 게임별 설정 통합 관리
- **🎨 UI 표준화**: 반응형 공통 스타일 프레임워크

### 🆕 신규 게임 추가
- **⚾ 야구 배팅 게임**: 센서 기반 타이밍 스윙 시스템
- **🎵 리듬 게임**: 센서 흔들기 기반 리듬 액션

### 🔧 개발자 경험 개선
- **📖 완벽한 문서화**: 상세한 개발 가이드 및 API 문서
- **🛠️ 개발 템플릿**: 새 게임 개발용 보일러플레이트
- **🔍 디버깅 도구**: 성능 모니터링 및 센서 데이터 시각화

## 🎯 게임 라인업

### 🎱 1. 볼 굴리기 게임
- **장르**: 2D 물리 퍼즐
- **접속**: `/ball-game` 또는 `/ball-rolling`
- **특징**: 
  - 10개 프로그레시브 레벨 (튜토리얼 ~ 최종 보스)
  - 현실적인 물리 엔진 (중력, 마찰, 충돌)
  - 파티클 효과 및 Web Audio API 효과음
  - 센서 기반 직관적 조작

### 🚀 2. 3D 우주선 게임
- **장르**: 3D 액션 시뮬레이션
- **접속**: `/game` 또는 `/spaceship-game`
- **특징**:
  - Three.js 기반 3차원 우주 환경
  - 센서 기반 6축 우주선 조작 (피치, 롤, 요, 추진)
  - 소행성 회피 및 실시간 3D 렌더링
  - 연료 및 생명 시스템

### 🏎️ 3. 센서 레이싱 게임
- **장르**: 2D 레이싱
- **접속**: `/racing-game` 또는 `/racing`
- **특징**:
  - 센서 기반 자동차 조종 (좌우 기울임)
  - AI 차량과의 경주 시스템
  - 트랙 기반 랩 타임 측정
  - 현실적인 자동차 물리

### 🎯 4. 센서 슈터 게임  
- **장르**: 슈팅 디펜스
- **접속**: `/sensor-shooter-game` 또는 `/shooter`
- **특징**:
  - 센서로 포탑 조준 및 발사
  - 무한 웨이브 적 시스템
  - 투사체 물리 및 충돌 처리
  - 점수 및 레벨 시스템

### 🏃‍♂️ 5. 센서 러너 게임
- **장르**: 무한 러너
- **접속**: `/runner-game` 또는 `/runner`
- **특징**:
  - 좌우 기울임으로 캐릭터 조작
  - 장애물 회피 시스템
  - 무한 스크롤링 환경
  - 거리 기반 점수 시스템

### 🏃‍♀️ 6. 허들 게임
- **장르**: 스포츠 경쟁
- **접속**: `/hurdle-game` 또는 `/hurdle`
- **특징**:
  - 센서로 허들 점프 타이밍 조절
  - 4명의 AI 플레이어와 경쟁
  - 물리 기반 허들 충돌 시스템
  - 실시간 순위 및 기록 측정

### 🍜 7. 라면 후루룩 게임
- **장르**: 개그/시뮬레이션
- **접속**: `/ramen-slurp-game` 또는 `/ramen`
- **특징**:
  - 센서로 라면 먹기 동작 (기울임 = 후루룩)
  - **온도 관리 시스템** (70도 이상 = 혀 데임!)
  - 콤보 시스템 및 파티클 효과
  - 캐릭터 표정 변화 및 말풍선
  - 점수별 재미있는 평가 시스템

### 🥴 8. 비틀비틀 귀가 게임
- **장르**: 어드벤처/시뮬레이션
- **접속**: `/staggering-home-game` 또는 `/staggering`
- **특징**:
  - 취한 상태로 집까지 안전하게 귀가
  - **5단계 스테이지** (골목길 → 번화가 → 주택가 → 공원 → 마지막 고비)
  - **취함 수치 관리** (0-100, 100되면 게임오버)
  - 비틀거림 효과 및 장애물 회피
  - 흔들기 액션으로 정신 차리기

### ⚾ 9. 야구 배팅 게임 🆕
- **장르**: 스포츠 시뮬레이션
- **접속**: `/baseball-game` 또는 `/baseball`
- **특징**:
  - 센서 기반 배트 스윙 시스템
  - 다양한 투구 타입 및 속도
  - 타이밍 기반 점수 시스템
  - 실시간 타구 궤적 시뮬레이션

### 🎵 10. 리듬 게임 🆕
- **장르**: 음악/리듬 액션
- **접속**: `/rhythm-game` 또는 `/rhythm`
- **특징**:
  - 센서 흔들기 기반 리듬 게임
  - 하향 동작 감지 시스템
  - 다양한 음악과 난이도
  - 콤보 및 스코어 시스템

## 🛠 기술 스택

- **프론트엔드**: HTML5, CSS3, JavaScript (ES6+)
- **3D 그래픽**: Three.js (우주선 게임)
- **2D 그래픽**: Canvas API (모든 2D 게임)
- **실시간 통신**: WebSocket
- **백엔드**: Node.js
- **물리 엔진**: 커스텀 2D/3D 물리 시뮬레이션
- **오디오**: Web Audio API

## 📱 지원 플랫폼

- **iOS**: Safari (HTTPS 필요 - 센서 권한)
- **Android**: Chrome, Samsung Internet
- **데스크톱**: Chrome, Firefox, Safari, Edge
- **시뮬레이션 모드**: 센서 없이 키보드/마우스로 플레이 가능

## 🚀 빠른 시작

### 1. 저장소 클론
```bash
git clone https://github.com/cmhblue1225/sensor_game.git
cd sensor_game
```

### 2. 의존성 설치
```bash
npm install
```

### 3. 서버 시작
```bash
npm start
```

### 4. 게임 접속
**통합 게임 허브**: http://localhost:8080/

**개별 게임 접속**:
- 🎱 볼 굴리기: http://localhost:8080/ball-game
- 🚀 3D 우주선: http://localhost:8080/game  
- 🏎️ 레이싱: http://localhost:8080/racing-game
- 🎯 슈터: http://localhost:8080/sensor-shooter-game
- 🏃‍♂️ 러너: http://localhost:8080/runner-game
- 🏃‍♀️ 허들: http://localhost:8080/hurdle-game
- 🍜 라면 후루룩: http://localhost:8080/ramen-slurp-game
- 🥴 비틀비틀 귀가: http://localhost:8080/staggering-home-game
- ⚾ 야구 배팅: http://localhost:8080/baseball-game
- 🎵 리듬 게임: http://localhost:8080/rhythm-game

**시스템 도구**:
- 📊 센서 대시보드: http://localhost:8080/sensor-dashboard.html
- 📱 센서 클라이언트: http://localhost:8080/sensor-client.html

### 5. 모바일 센서 연결
휴대폰에서 **센서 클라이언트**에 접속:
- HTTP: http://[컴퓨터IP]:8080/sensor-client.html
- HTTPS: https://[컴퓨터IP]:8443/sensor-client.html (iOS 권장)

## 🎮 게임 조작법

### 📱 센서 모드 (권장)
- **기본 자세**: 휴대폰을 가로로 들고 양손으로 잡기
- **볼 굴리기**: 휴대폰 기울임 = 공 이동
- **우주선**: 6축 조작 (피치, 롤, 요 + 3축 추진)
- **레이싱**: 좌우 기울임 = 스티어링
- **슈터**: 기울임 = 포탑 조준
- **러너**: 좌우 기울임 = 레인 변경
- **허들**: 위로 기울임 = 점프
- **라면**: 앞뒤 기울임 = 후루룩
- **비틀비틀 귀가**: 기울임 = 이동, 흔들기 = 정신 차리기
- **야구**: 센서 스윙 = 배트 스윙
- **리듬**: 하향 흔들기 = 리듬 액션

### ⌨️ 시뮬레이션 모드 (센서 없이)
- **볼 굴리기**: WASD 또는 화살표 키
- **우주선**: 마우스 드래그 + WASD + 스페이스/Shift
- **레이싱**: WASD 또는 화살표 키
- **슈터**: 마우스 조준 + 클릭
- **러너**: 화살표 키 (좌우)
- **허들**: 스페이스바 (점프)
- **라면**: 스페이스바 (후루룩)
- **비틀비틀 귀가**: WASD (이동) + 스페이스바 (정신 차리기)
- **야구**: 스페이스바 (스윙)
- **리듬**: 스페이스바 (리듬 액션)

## 🎯 게임별 특별 기능

### 🍜 라면 후루룩 게임 - 상세 가이드
**핵심 메커니즘**: **온도 관리**가 승부의 열쇠!

- **초기 온도**: 80도 (매우 뜨거움 🔥)
- **적정 온도**: 30-70도 (맛있게 먹을 수 있는 온도 😋)
- **온도 변화**: 시간이 지나면서 자연스럽게 식어감

**온도별 반응**:
- **🔥 70도 이상**: 혀를 데임! 😵 점수 절반, 콤보 리셋, 화면 흔들림
- **😋 30-70도**: 맛있게 먹음! 정상 점수 + 콤보 보너스
- **🥶 30도 미만**: 차가워서 맛없음 😞 낮은 점수

**고득점 팁**:
1. 처음엔 기다렸다가 온도가 적당해지면 연속으로 먹기
2. 온도 게이지를 자주 확인
3. 콤보를 유지하는 것이 핵심
4. 너무 서두르지 말고 온도에 맞춰 조절

### 🥴 비틀비틀 귀가 게임 - 상세 가이드
**핵심 메커니즘**: **취함 수치 관리**가 생존의 열쇠!

- **취함 수치**: 0-100 (100 도달 시 게임오버)
- **스테이지**: 5단계 연속 진행
- **목표**: 각 스테이지마다 집(🏠)에 도달하기

**스테이지별 특징**:
- **골목길**: 장애물 10개, 취함 증가율 낮음
- **번화가**: 장애물 20개, 취함 증가율 증가
- **주택가**: 장애물 15개, 중간 난이도
- **공원**: 장애물 12개, 비교적 안전
- **마지막 고비**: 장애물 25개, 최고 난이도

**게임 메커니즘**:
- **비틀거림**: 취함 수치에 비례해서 자동으로 비틀거림
- **장애물 충돌**: 쓰레기통🗑️, 가로등💡, 물웅덩이💧 충돌 시 취함 +10
- **정신 차리기**: 흔들기 액션으로 취함 -10 (쿨다운 1초)

**생존 팁**:
1. 취함 수치를 항상 70 이하로 유지
2. 장애물과의 충돌을 최대한 피하기
3. 위험할 때 흔들기 액션으로 정신 차리기
4. 각 스테이지마다 집에 빠르게 도달하기

## 🔧 HTTPS 설정 (iOS 센서 권한)

iOS에서 센서 권한을 사용하려면 HTTPS가 필요합니다:

```bash
# 자체 서명 인증서 생성
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes -subj "/CN=localhost"
```

**HTTPS 서버 접속**: https://localhost:8443

## 📁 프로젝트 구조

```
sensor_game/
├── index.html                   # 통합 게임 허브
├── shared/                      # 🆕 공통 모듈 시스템
│   ├── js/                      #   - BaseSensorManager.js
│   │   └── ...                  #   - 유틸리티 라이브러리들
│   ├── css/common.css           #   - 공통 스타일 프레임워크
│   └── examples/                #   - 개발 템플릿 및 예시
├── ball-rolling-game/           # 볼 굴리기 게임
├── spaceship-game/              # 3D 우주선 게임  
├── racing-game/                 # 센서 레이싱 게임
├── sensor-shooter-game/         # 센서 슈터 게임
├── runner-game/                 # 센서 러너 게임
├── hurdle-game/                 # 허들 게임
├── ramen-slurp-game/           # 라면 후루룩 게임
├── staggering-home-game/       # 비틀비틀 귀가 게임
├── baseball-game/              # 야구 배팅 게임 🆕
├── rhythm-game/                # 리듬 게임 🆕
├── sensor-client.html          # 모바일 센서 클라이언트
├── sensor-dashboard.html       # 센서 모니터링 대시보드
├── sensor-websocket-server.js  # WebSocket 서버
├── REFACTORING_GUIDE.md        # 🆕 리팩토링 가이드
└── package.json
```

## 🎯 주요 기술적 특징

### 센서 데이터 처리
- **실시간 수집**: WebSocket을 통한 지연 없는 데이터 전송
- **데이터 스무싱**: 센서 노이즈 제거를 위한 이동평균 필터
- **자동 보정**: 사용자 환경에 맞는 센서 캘리브레이션
- **극값 필터링**: NaN, Infinity 등 비정상 값 처리
- **시뮬레이션 모드**: 센서 없이도 키보드/마우스로 테스트 가능

### 물리 시뮬레이션
- **2D 물리**: 중력, 마찰, 탄성 충돌 (볼 굴리기, 레이싱, 러너, 허들)
- **3D 물리**: 6축 운동 시뮬레이션 (우주선)
- **투사체 물리**: 포물선 궤도 및 충돌 (슈터)
- **충돌 감지**: 원-사각형, 원-원, AABB 등 다양한 충돌 처리

### 게임 엔진 아키텍처 v4.0 🆕
- **공통 모듈 시스템**: BaseSensorManager 상속 구조로 중복 코드 90% 제거
- **설정 중앙화**: GameConfig 클래스로 모든 게임 설정 통합 관리
- **UI 표준화**: 공통 CSS 프레임워크로 일관된 사용자 경험
- **유틸리티 라이브러리**: MathUtils, ValidationUtils 등 재사용 가능한 모듈
- **개발 효율성**: 새 게임 개발 시간 50% 단축
- **확장 가능성**: 템플릿 기반 빠른 게임 추가
- **크로스 플랫폼**: 데스크톱, 모바일 동시 지원
- **실시간 렌더링**: Canvas 2D/WebGL 기반 부드러운 애니메이션

## 📊 시스템 성능

- **동시 연결**: 다중 디바이스 동시 센서 데이터 처리
- **낮은 지연시간**: WebSocket 기반 실시간 통신 (< 50ms)
- **메모리 효율**: 각 게임별 독립적인 리소스 관리
- **모바일 최적화**: 터치 인터페이스 및 센서 권한 처리

## 🔧 개발자 정보

### 최신 업데이트 (v4.0) 🚀
- 🏗️ **아키텍처 대혁신**: 공통 모듈 시스템 도입으로 중복 코드 90% 제거
- 🆕 **야구 배팅 게임** 추가 - 센서 기반 타이밍 스윙 시스템
- 🆕 **리듬 게임** 추가 - 센서 흔들기 기반 리듬 액션
- 📁 **shared/ 모듈**: BaseSensorManager, 유틸리티 라이브러리, 공통 스타일
- 🛠️ **개발자 도구**: 완벽한 문서화, 개발 템플릿, 리팩토링 가이드
- ⚙️ **설정 중앙화**: GameConfig 시스템으로 모든 게임 설정 통합 관리
- 🎨 **UI 표준화**: 반응형 공통 스타일 프레임워크
- 🔍 **성능 향상**: 메모리 효율성 개선 및 렌더링 최적화

### 버전 기록
- **v4.0**: 아키텍처 혁신, 공통 모듈화, 야구/리듬 게임 추가, 완벽한 문서화
- **v3.0**: 8개 게임 완성, 통합 허브, 라면/비틀비틀 게임 추가
- **v2.0**: 볼 굴리기 게임 추가, 물리 엔진 개발
- **v1.0**: 3D 우주선 게임, 센서 모니터링 시스템

### 기여하기
1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 🎮 플레이 가이드

### 신규 플레이어를 위한 추천 순서
1. **🍜 라면 후루룩** - 가장 쉽고 재미있음, 센서 감각 익히기
2. **🥴 비틀비틀 귀가** - 재미있는 컨셉, 기본 이동 조작 연습
3. **🎱 볼 굴리기** - 기본 센서 조작 마스터
4. **🎵 리듬 게임** - 센서 타이밍 감각 개발
5. **🏃‍♂️ 센서 러너** - 반응 속도 훈련
6. **🏎️ 레이싱** - 정밀 조작 연습
7. **🏃‍♀️ 허들** - 점프 타이밍 감각 개발
8. **⚾ 야구 배팅** - 스윙 타이밍 마스터
9. **🎯 센서 슈터** - 조준 정확도 향상
10. **🚀 3D 우주선** - 고급 6축 조작 도전

### 센서 최적화 팁
- 휴대폰을 안정적으로 잡고 플레이
- 게임 시작 전 센서 보정 (R키) 권장
- 너무 급격한 움직임보다는 부드러운 조작
- 각 게임마다 센서 감도가 다르므로 적응 시간 필요

## 📞 문의사항

이슈나 문의사항이 있으시면 GitHub Issues를 통해 연락해주세요.

---

## 🛠️ 개발자를 위한 리소스

### 📖 문서
- **[REFACTORING_GUIDE.md](REFACTORING_GUIDE.md)**: 완전한 리팩토링 가이드
- **shared/examples/**: 개발 템플릿 및 예시 코드
- **API 문서**: 각 모듈의 JSDoc 주석 참조

### 🔧 개발 도구
- **BaseSensorManager**: 센서 관리 기본 클래스 (상속 필수)
- **GameConfig**: 게임별 설정 중앙 관리
- **유틸리티 라이브러리**: MathUtils, ValidationUtils, UIUtils

### 🚀 새 게임 개발 시작하기
1. `shared/examples/template.html` 복사
2. `YourGameSensorManager extends BaseSensorManager` 구현
3. `GameConfig`에 게임 설정 추가
4. 개발 및 테스트

---

**Made with ❤️ using Web Technologies and Mobile Sensors**

**총 10개 게임 | 실시간 센서 연동 | 크로스 플랫폼 지원 | v4.0 아키텍처 혁신**